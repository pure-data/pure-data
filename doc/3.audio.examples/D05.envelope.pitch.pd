#N canvas 529 38 615 731 12;
#X declare -stdpath ./;
#X obj 68 419 *~;
#X obj 260 409 tabread4~ mtof;
#X obj 260 436 osc~;
#X obj 260 378 +~ 69;
#X text 72 548 This is an extreme use of pitch enveloping. In a real situation you might want an envelope controlling vibrato depth or the like instead of straight pitch., f 69;
#X obj 68 341 adsr 100 50 200 90 1000;
#X obj 260 341 adsr 20 200 100 100 1000;
#X obj 68 460 output~;
#X obj 263 488 declare -stdpath ./;
#X text 130 188 <-- attack;
#X text 507 188 <-- release;
#X text 74 65 For pitch envelopes \, unlike amplitude envelopes \, discontinuities are allowed and sometimes you would rather the envelope generator actually jump to zero when it's triggered. The [adsr] abstraction does this for you if you send a negative trigger instead of a positive one:, f 65;
#X text 444 341 <-- click to open and check the inner workings of the abstraction., f 17;
#X obj 68 375 dbtorms~;
#X text 72 609 We have added a new table ("mtof") for converting audio signals from pitch to frequency. Like in the previous example \, there's also a real [mtof~] object you can use instead and that we'll use in the next examples. The table lookup is \, again \, for CPU efficiency concerns and its range is 1-127 \, so you want to add a base pitch in before you start reading from it., f 69;
#N canvas 453 231 801 286 mtof-table 0;
#X msg 67 39 bang;
#X obj 67 68 t b b;
#X obj 130 100 f;
#X obj 168 100 + 1;
#X msg 148 70 0;
#X obj 67 97 until;
#X obj 176 156 t f f;
#X floatatom 335 132 5 0 0 0 - - - 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array mtof 130 float 1;
#A 0 8.1758 8.66196 9.17702 9.72272 10.3009 10.9134 11.5623 12.2499 12.9783 13.75 14.5676 15.4339 16.3516 17.3239 18.354 19.4454 20.6017 21.8268 23.1247 24.4997 25.9565 27.5 29.1352 30.8677 32.7032 34.6478 36.7081 38.8909 41.2034 43.6535 46.2493 48.9994 51.9131 55 58.2705 61.7354 65.4064 69.2957 73.4162 77.7817 82.4069 87.3071 92.4986 97.9989 103.826 110 116.541 123.471 130.813 138.591 146.832 155.563 164.814 174.614 184.997 195.998 207.652 220 233.082 246.942 261.626 277.183 293.665 311.127 329.628 349.228 369.994 391.995 415.305 440 466.164 493.883 523.251 554.365 587.33 622.254 659.255 698.456 739.989 783.991 830.609 880 932.328 987.767 1046.5 1108.73 1174.66 1244.51 1318.51 1396.91 1479.98 1567.98 1661.22 1760 1864.66 1975.53 2093 2217.46 2349.32 2489.02 2637.02 2793.83 2959.96 3135.96 3322.44 3520 3729.31 3951.07 4186.01 4434.92 4698.64 4978.03 5274.04 5587.65 5919.91 6271.93 6644.88 7040 7458.62 7902.13 8372.02 8869.84 9397.27 9956.06 10548.1 11175.3 11839.8 12543.9 13289.8 14080;
#X coords 0 12000 130 0 200 100 1;
#X restore 470 71 graph;
#X obj 259 167 mtof;
#X floatatom 259 196 10 0 0 0 - - - 0;
#X text 474 178 ------ 130 samples ------;
#X text 679 164 0;
#X text 681 64 12000;
#X obj 120 185 mtof;
#X obj 130 127 sel 129;
#X obj 120 214 tabwrite mtof;
#X obj 335 167 tabread4 mtof;
#X text 248 105 ... and test accuracy;
#X text 105 38 patch to recalculate the mtof table;
#X floatatom 335 196 10 0 0 0 - - - 0;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 1 4 0;
#X connect 2 0 3 0;
#X connect 2 0 15 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 2 0;
#X connect 6 0 14 0;
#X connect 6 1 16 1;
#X connect 7 0 9 0;
#X connect 7 0 17 0;
#X connect 9 0 10 0;
#X connect 14 0 16 0;
#X connect 15 0 5 1;
#X connect 15 1 6 0;
#X connect 17 0 20 0;
#X restore 402 431 pd mtof-table;
#X obj 68 308 tgl 21 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000 0 1;
#X obj 260 308 tgl 21 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000 0 1;
#X obj 68 255 r trigger;
#X obj 260 255 r trigger2;
#X floatatom 68 281 3 0 0 0 - - - 0;
#X floatatom 260 281 3 0 0 0 - - - 0;
#X msg 51 171 \; trigger 1 \; trigger2 1;
#X msg 224 171 \; trigger 1 \; trigger2 -1;
#X msg 427 171 \; trigger 0 \; trigger2 0;
#X text 321 174 <-- attack restarting pitch env, f 10;
#X obj 47 17 cnv 5 5 25 empty empty Pitch\ Envelopes 15 13 0 16 #dfdfdf #202020 0;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 2 0 0 1;
#X connect 3 0 1 0;
#X connect 5 0 13 0;
#X connect 6 0 3 0;
#X connect 13 0 0 0;
#X connect 16 0 5 0;
#X connect 17 0 6 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 20 0 16 0;
#X connect 21 0 17 0;
