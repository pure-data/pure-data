#N canvas 475 73 651 705 12;
#X obj 63 166 r trigger;
#X obj 63 214 tabread4~ dbtorms;
#X obj 63 268 *~;
#N canvas 513 374 809 554 make-table 0;
#X msg 67 39 bang;
#X obj 67 68 t b b;
#X obj 130 100 f;
#X obj 168 100 + 1;
#X msg 148 70 0;
#X obj 67 97 until;
#X obj 176 156 t f f;
#X floatatom 335 132 0 0 0 0 - - -;
#X floatatom 335 196 0 0 0 0 - - -;
#N canvas 0 0 450 300 (subpatch) 0;
#X array dbtorms 123 float 1;
#A 0 0 0 1.25893e-05 1.41254e-05 1.58489e-05 1.77828e-05 1.99526e-05
2.23872e-05 2.51189e-05 2.81838e-05 3.16228e-05 3.54813e-05 3.98107e-05
4.46684e-05 5.01187e-05 5.62341e-05 6.30957e-05 7.07946e-05 7.94328e-05
8.91251e-05 0.0001 0.000112202 0.000125893 0.000141254 0.000158489
0.000177828 0.000199526 0.000223872 0.000251189 0.000281838 0.000316228
0.000354813 0.000398107 0.000446684 0.000501187 0.000562341 0.000630957
0.000707946 0.000794328 0.000891251 0.001 0.00112202 0.00125893 0.00141254
0.00158489 0.00177828 0.00199526 0.00223872 0.00251189 0.00281838 0.00316228
0.00354813 0.00398107 0.00446684 0.00501187 0.00562341 0.00630957 0.00707946
0.00794328 0.00891251 0.01 0.0112202 0.0125893 0.0141254 0.0158489
0.0177828 0.0199526 0.0223872 0.0251189 0.0281838 0.0316228 0.0354813
0.0398107 0.0446684 0.0501187 0.0562341 0.0630957 0.0707946 0.0794328
0.0891251 0.1 0.112202 0.125893 0.141254 0.158489 0.177828 0.199526
0.223872 0.251189 0.281838 0.316228 0.354813 0.398107 0.446684 0.501187
0.562341 0.630957 0.707946 0.794328 0.891251 1 1.12202 1.25893 1.41254
1.58489 1.77828 1.99526 2.23872 2.51189 2.81838 3.16228 3.54813 3.98107
4.46684 5.01187 5.62341 6.30957 7.07946 7.94328 8.91251 10 11.2202
12.5893;
#X coords 0 10 123 0 200 100 1;
#X restore 483 265 graph;
#X text 685 358 0;
#X text 687 258 10;
#X text 489 370 ------ 123 samples ------;
#N canvas 0 0 450 300 (subpatch) 0;
#X array mtof 130 float 1;
#A 0 8.1758 8.66196 9.17702 9.72272 10.3009 10.9134 11.5623 12.2499
12.9783 13.75 14.5676 15.4339 16.3516 17.3239 18.354 19.4454 20.6017
21.8268 23.1247 24.4997 25.9565 27.5 29.1352 30.8677 32.7032 34.6478
36.7081 38.8909 41.2034 43.6535 46.2493 48.9994 51.9131 55 58.2705
61.7354 65.4064 69.2957 73.4162 77.7817 82.4069 87.3071 92.4986 97.9989
103.826 110 116.541 123.471 130.813 138.591 146.832 155.563 164.814
174.614 184.997 195.998 207.652 220 233.082 246.942 261.626 277.183
293.665 311.127 329.628 349.228 369.994 391.995 415.305 440 466.164
493.883 523.251 554.365 587.33 622.254 659.255 698.456 739.989 783.991
830.609 880 932.328 987.767 1046.5 1108.73 1174.66 1244.51 1318.51
1396.91 1479.98 1567.98 1661.22 1760 1864.66 1975.53 2093 2217.46 2349.32
2489.02 2637.02 2793.83 2959.96 3135.96 3322.44 3520 3729.31 3951.07
4186.01 4434.92 4698.64 4978.03 5274.04 5587.65 5919.91 6271.93 6644.88
7040 7458.62 7902.13 8372.02 8869.84 9397.27 9956.06 10548.1 11175.3
11839.8 12543.9 13289.8 14080;
#X coords 0 12000 130 0 200 100 1;
#X restore 482 97 graph;
#X obj 259 167 mtof;
#X floatatom 259 196 0 0 0 0 - - -;
#X text 486 204 ------ 130 samples ------;
#X text 691 190 0;
#X text 693 90 12000;
#X obj 120 185 mtof;
#X obj 130 127 sel 129;
#X obj 120 214 tabwrite mtof;
#X obj 335 167 tabread4 mtof;
#X obj 141 420 moses 2;
#X msg 115 269 bang;
#X obj 115 298 t b b;
#X obj 173 334 f;
#X obj 211 334 + 1;
#X msg 191 306 0;
#X obj 115 349 until;
#X msg 141 451 0;
#X obj 187 452 dbtorms;
#X obj 218 387 t f f;
#X obj 141 484 tabwrite dbtorms;
#X text 248 105 ... and test accuracy;
#X text 105 38 patch to recalculate the mtof table;
#X text 157 269 bang to recalculate dbtorms table;
#X obj 173 362 sel 123;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 1 4 0;
#X connect 2 0 3 0;
#X connect 2 0 20 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 2 0;
#X connect 6 0 19 0;
#X connect 6 1 21 1;
#X connect 7 0 14 0;
#X connect 7 0 22 0;
#X connect 14 0 15 0;
#X connect 19 0 21 0;
#X connect 20 0 5 1;
#X connect 20 1 6 0;
#X connect 22 0 8 0;
#X connect 23 0 30 0;
#X connect 23 1 31 0;
#X connect 24 0 25 0;
#X connect 25 0 29 0;
#X connect 25 1 28 0;
#X connect 26 0 27 0;
#X connect 26 0 37 0;
#X connect 27 0 26 1;
#X connect 28 0 26 1;
#X connect 29 0 26 0;
#X connect 30 0 33 0;
#X connect 31 0 33 0;
#X connect 32 0 23 0;
#X connect 32 1 33 1;
#X connect 37 0 29 1;
#X connect 37 1 32 0;
#X restore 333 321 pd make-table;
#X text 78 22 PITCH ENVELOPES;
#X text 78 57 For pitch envelopes \, unlike amplitude envelopes \,
discontinuities are allowed and sometimes you would rather the envelope
generator actually jump to zero when it's triggered. The "adsr" object
does this for you if you send a negative trigger instead of a positive
one:;
#X obj 255 183 r trigger2;
#X obj 255 255 tabread4~ mtof;
#X obj 255 279 osc~;
#X msg 73 411 \; pd dsp 1 \; trigger 1 \; trigger2 1;
#X msg 236 411 \; pd dsp 1 \; trigger 1 \; trigger2 -1;
#X msg 429 411 \; pd dsp 1 \; trigger 0 \; trigger2 0;
#X obj 255 231 +~ 69;
#X text 322 431 restarting;
#X text 322 444 pitch env;
#X text 93 518 We have added a new table \, mtof \, for converting
audio signals from pitch to frequency. Its range is 1-127 \, so you
want to add a base pitch in before you start reading from it., f 61
;
#X text 93 573 This is an extreme use of pitch enveloping. In a real
situation you might want an envelope controlling vibrato depth or the
like instead of straight pitch., f 61;
#X obj 63 190 adsr 100 50 200 90 1000;
#X obj 255 207 adsr 20 200 100 100 1000;
#X text 399 646 updated for Pd version 0.37;
#X obj 63 319 output~;
#X text 152 437 <= attack;
#X text 322 417 <= attack;
#X text 510 430 <= release;
#X connect 0 0 17 0;
#X connect 1 0 2 0;
#X connect 2 0 20 0;
#X connect 2 0 20 1;
#X connect 6 0 18 0;
#X connect 7 0 8 0;
#X connect 8 0 2 1;
#X connect 12 0 7 0;
#X connect 17 0 1 0;
#X connect 18 0 12 0;
